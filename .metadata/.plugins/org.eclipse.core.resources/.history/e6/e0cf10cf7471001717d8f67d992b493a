package photos;

import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;
import java.io.PrintWriter;
import java.nio.charset.Charset;
import java.util.ArrayList;

import javax.imageio.ImageIO;

import pictureObj.Pixel;

public class PhotoReader {
	private static Charset UTF8 = Charset.forName("UTF-8");

	public static void main(String[] args) throws IOException {

		photoReader("photos/test.jpg");

	}

	public static void writesPhotosValueToFile(ArrayList<Pixel> listOfPixels) throws IOException {
		// System.out.println("From writes photo values method: " +
		// listOfPixels.size());
		PrintWriter writer = new PrintWriter("outputfiles/test.txt", "UTF8");
		int i = 0;
		try {
			for (int j = 0; j < listOfPixels.size(); j++) {
				writer.print(listOfPixels.get(i));
				writer.println();
				i++;
			}
		} finally {
			writer.close();
		}

	}

	public static void photoReader(String path) {
		ArrayList<Pixel> listOfPixels = new ArrayList<>();
		BufferedImage img = null;
		File f = null;
		Pixel p = null;
		int xCoordinate = 0;
		int yCoordinate = 0;

		// reads the image
		try {
			f = new File("photos/test.jpg");
			img = ImageIO.read(f);

		} catch (IOException e) {
			System.out.println("Failure from photo reader");
			System.out.println(e);
		}

		int imgWidth = img.getWidth();
		System.out.println("Width: " + imgWidth);
		
		int imgHeight = img.getHeight();
		System.out.println("Height: " + imgHeight);
		System.out.println();
		System.out.println();

		int pixel = img.getRGB(xCoordinate, yCoordinate);
		// gets the alpha values of the pixel
		int a = (pixel >> 24) & 0xFF;

		// gets the red values of the pixel
		int r = (pixel >> 16) & 0xFF;

		// gets the green values of the pixel
		int g = (pixel >> 8) & 0xFF;

		// gets the blue values of the pixel
		int b = pixel & 0xFF;

		// gets the pixels...theoretically. And creates new pixel object on
		// every iteration...again theoretically
		do {
			for (int i = 0; i < imgWidth; i++) {
				System.out.println(p);
				
				
//				p = new Pixel();
//
//				p.setAlpha(a);
//				p.setBlue(b);
//				p.setGreen(g);
//				p.setRed(r);
//				p.setxCoordinate(xCoordinate);
//				p.setyCoordinate(yCoordinate);
//
//				listOfPixels.add(p);
//				xCoordinate++;
//				
				if (xCoordinate - 1 == img.getWidth()) {
					xCoordinate = 0;
					yCoordinate++;
				}
				
			}
		} while (yCoordinate <= img.getHeight());

		try {
			writesPhotosValueToFile(listOfPixels);
		} catch (IOException e) {
			e.printStackTrace();
		}

	}

}
